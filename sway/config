# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

set $primary_monitor LVDS-1
set $secondary_monitor HDMI-2
set $launcher dmenu_path | fzf | xargs swaymsg exec

set $term alacritty msg create-window -e zsh || alacritty -e zsh
set $term_alt foot
set $mod Mod4
set $lock "swaylock -k -i ~/.wallpaper.jpg"
set $menu dmenu_path | wmenu | xargs swaymsg exec --

include /etc/sway/config-vars.d/*

# output LVDS-1 scale 1.25
output LVDS-1 scale 1
seat seat0 xcursor_theme Adwaita

### Output configuration
#
# Default wallpaper (more resolutions are available in /usr/share/backgrounds/sway/)
output * bg "$HOME/.dotfiles/wallpaper.jpg" fill
#
# Example configuration:
#
#   output HDMI-A-1 resolution 1920x1080 position 1920,0
#
# You can get the names of your outputs by running: swaymsg -t get_outputs

floating_minimum_size 500 x 300
floating_maximum_size 2000 x 1500

font pango:Hack Nerd Font Mono 8

### Key bindings
#
# Basics:
#
    # Start a terminal
    bindsym $mod+Return exec $term
    bindsym $mod+Shift+Return exec $term_alt

    # Kill focused window
    bindsym --to-code $mod+Shift+q kill

    # Start your launcher
    bindsym --no-repeat --to-code $mod+d exec $menu

    # Drag floating windows by holding down $mod and left mouse button.
    # Resize them with right mouse button + $mod.
    # Despite the name, also works for non-floating windows.
    # Change normal to inverse to use left mouse button for resizing and right
    # mouse button for dragging.
    floating_modifier $mod inverse

#
# Moving around:
#
    # Move your focus around
    bindsym --to-code $mod+h focus left
    bindsym --to-code $mod+j focus down
    bindsym --to-code $mod+k focus up
    bindsym --to-code $mod+l focus right

    # Move the focused window with the same, but add Shift
    bindsym --to-code $mod+Shift+H move left
    bindsym --to-code $mod+Shift+J move down
    bindsym --to-code $mod+Shift+K move up
    bindsym --to-code $mod+Shift+L move right
#
# Workspaces:
#
    # Setup workspaces
    workspace 1 output $primary_monitor
    workspace 2 output $primary_monitor
    workspace 3 output $primary_monitor
    workspace 4 output $primary_monitor
    workspace 5 output $primary_monitor
    workspace 6 output $primary_monitor
    workspace 7 output $primary_monitor
    workspace 8 output $primary_monitor
    workspace 9 output $primary_monitor
    workspace 10 output $primary_monitor
    workspace 0 output $secondary_monitor

    # Switch to workspace
    bindsym $mod+1 workspace number 1
    bindsym $mod+2 workspace number 2
    bindsym $mod+3 workspace number 3
    bindsym $mod+4 workspace number 4
    bindsym $mod+5 workspace number 5
    bindsym $mod+6 workspace number 6
    bindsym $mod+7 workspace number 7
    bindsym $mod+8 workspace number 8
    bindsym $mod+9 workspace number 9
    bindsym $mod+0 workspace number 10
    bindsym $mod+grave workspace number 0

    # Move focused container to workspace
    bindsym $mod+Shift+1 move container to workspace number 1
    bindsym $mod+Shift+2 move container to workspace number 2
    bindsym $mod+Shift+3 move container to workspace number 3
    bindsym $mod+Shift+4 move container to workspace number 4
    bindsym $mod+Shift+5 move container to workspace number 5
    bindsym $mod+Shift+6 move container to workspace number 6
    bindsym $mod+Shift+7 move container to workspace number 7
    bindsym $mod+Shift+8 move container to workspace number 8
    bindsym $mod+Shift+9 move container to workspace number 9
    bindsym $mod+Shift+0 move container to workspace number 10
    bindsym $mod+Shift+grave move container to workspace number 0
#
# Layout stuff:
#
    # You can "split" the current object of your focus with
    # $mod+b or $mod+v, for horizontal and vertical splits
    # respectively.
    bindsym --to-code $mod+b splith
    bindsym --to-code $mod+v splitv

    # Switch the current container between different layout styles
    bindsym --to-code $mod+s layout stacking
    bindsym --to-code $mod+w layout tabbed
    bindsym --to-code $mod+e layout toggle split

    # Make the current focus fullscreen
    bindsym --to-code $mod+f fullscreen toggle

    # Toggle the current focus between tiling and floating mode
    bindsym --to-code $mod+Shift+space floating toggle

    # Swap focus between the tiling area and the floating area
    bindsym --to-code $mod+space focus mode_toggle

    # Move focus to the parent container
    bindsym --to-code $mod+a focus parent

    # focus the child container
    #bindsym $mod+d focus child
#
# Scratchpad:
#
    # Sway has a "scratchpad", which is a bag of holding for windows.
    # You can send windows there and get them back later.

    # Move the currently focused window to the scratchpad
    bindsym $mod+Shift+minus move scratchpad

    # Show the next scratchpad window or hide the focused scratchpad window.
    # If there are multiple scratchpad windows, this command cycles through them.
    bindsym $mod+minus scratchpad show

#
# Resizing containers:
#
mode "resize" {
    # left will shrink the containers width
    # right will grow the containers width
    # up will shrink the containers height
    # down will grow the containers height
    bindsym l resize shrink width 10 px or 10 ppt
    bindsym k resize grow height 10 px or 10 ppt
    bindsym j resize shrink height 10 px or 10 ppt
    bindsym h resize grow width 10 px or 10 ppt

    # Return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}



# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'
bindcode $mod+Control+46 exec $lock

bindsym --to-code $mod+r mode "resize"

#######
#THEME#
#######

## Color scheme (Gruvbox dark)
set $color_normal_white  #a89984
set $color_bright_white  #ebdbb2
set $color_normal_gray   #222222
set $color_bright_gray   #3c3836
set $color_bright_yellow #d79921
set $color_normal_black  #282828
set $color_unused        #ff0000

# Colors                  border                 background             text                   indicator             child_border
client.focused            $color_bright_gray     $color_bright_gray     $color_bright_white    $color_bright_white   $color_normal_white
client.focused_inactive   $color_bright_gray     $color_bright_gray     $color_bright_white    $color_normal_black   $color_normal_black
client.unfocused          $color_normal_gray     $color_normal_gray     $color_normal_white    $color_unused         $color_normal_black
client.urgent             $color_bright_yellow   $color_bright_yellow   $color_normal_black    $color_unused         $color_bright_white
client.placeholder        $color_bright_gray     $color_normal_black    $color_unused          $color_bright_white   $color_unused

# Bar
# bar {
#   colors {
#     # Whole color settings
#     background $color_normal_gray
#     separator  $color_bright_gray
#     statusline $color_bright_white
#
#     # Type             border                 background              font
#     focused_workspace  $color_bright_gray     $color_bright_gray      $color_bright_white
#     active_workspace   $color_normal_gray     $color_normal_gray      $color_normal_white
#     inactive_workspace $color_normal_gray     $color_normal_gray      $color_normal_white
#     urgent_workspace   $color_bright_yellow   $color_bright_yellow    $color_normal_black
#   }
#
#   position top
#   mode hide
#   status_command i3status
#   tray_output primary
# }

########
#CUSTOM#
########

# bindsym $mod+t exec --no-startup-id ~/bin/i3runorraise.sh '[instance="^tty-clock$"]' $term -name tty-clock -e tty-clock -sc; mode "default"
mode "run" {
    bindsym n exec ~/bin/i3runorraise.sh '[instance="^nvim-qt$"]' nvim-qt; mode "default"
    bindsym g exec ~/bin/i3runorraise.sh '[instance="^google-chrome|chromium-browser$"]' google-chrome; mode "default"
    bindsym t exec ~/bin/i3runorraise.sh '[instance="^Telegram$"]' ~/bin/Telegram/Telegram; mode "default"
    # bindsym n exec --no-startup-id ~/bin/i3runorraise.sh '[instance="^ncmpcpp$"]'   $term -name ncmpcpp -e ncmpcpp; mode "default"
    bindsym a exec --no-startup-id ~/bin/i3runorraise.sh '[instance="^alsamixer$"]' $term -name alsamixer -e alsamixer; mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

bindsym $mod+semicolon mode "run"
bindsym $mod+g [instance="^google-chrome|chromium-browser$"] focus
bindsym $mod+n [instance="^nvim-qt$"] focus
bindsym $mod+t [instance="^Telegram$"] focus

assign [instance="mpvTV"] "0:`"
for_window [instance="^ncmpcpp|alsamixer|tty-clock$"] move scratchpad, scratchpad show
for_window [app_id="^google-chrome|chromium-browser$"] border none, background "<span foreground='red'>%title</span>"
for_window [app_id=^nvim|vifm$] layout tabbed

assign [app_id="^google-chrome|chromium-browser$"] workspace 1
assign [app_id="^nvim$"] workspace 3
assign [app_id="^vifm$"] workspace 3
assign [app_id="^org.telegram.desktop"] workspace 4

bindsym --release $mod+x exec --no-startup-id import /tmp/latest-screenshot.png

bindsym XF86AudioMute exec --no-startup-id  amixer -q -D pulse sset Master toggle
bindsym XF86AudioLowerVolume exec --no-startup-id amixer -q -D pulse sset Master 5%-
bindsym XF86AudioRaiseVolume exec --no-startup-id amixer -q -D pulse sset Master 5%+

bindsym XF86AudioStop exec --no-startup-id mpc stop
bindsym XF86AudioPlay exec --no-startup-id mpc toggle
bindsym XF86AudioPrev exec --no-startup-id mpc prev
bindsym XF86AudioNext exec --no-startup-id mpc next
bindsym XF86ScreenSaver exec --no-startup-id $lock
bindsym XF86Display exec --no-startup-id xset dpms force off

bindsym $mod+Shift+b border normal

########
#CUSTOM#
########

exec swayidle -w timeout 300 'swaymsg "output * dpms off"' resume 'swaymsg "output * dpms on"' before-sleep $lock

input * {
    xkb_layout us,ru
    xkb_model thinkpad60
    # xkb_options grp:caps_toggle,grp_led:caps,compose:ralt,misc:typo
    # xkb_options grp:caps_toggle,grp:switch,grp_led:caps,compose:ralt,lv5:ralt_switch,misc:typo
    # xkb_options grp:caps_toggle,grp:switch,grp_led:caps,compose:ralt,misc:typo
    xkb_options grp:caps_toggle,grp:switch,grp_led:caps,lv3:ralt_switch,misc:typo
}

input "2:7:SynPS/2_Synaptics_TouchPad" {
	tap enabled
	pointer_accel 0.5
	dwt enabled
}

bar {
    # swaybar_command waybar
    position bottom
    colors {
      # Whole color settings
      background $color_normal_gray
      separator  $color_bright_gray
      statusline $color_bright_white

      # Type             border                 background              font
      focused_workspace  $color_bright_gray     $color_bright_gray      $color_bright_white
      active_workspace   $color_normal_gray     $color_normal_gray      $color_normal_white
      inactive_workspace $color_normal_gray     $color_normal_gray      $color_normal_white
      urgent_workspace   $color_bright_yellow   $color_bright_yellow    $color_normal_black
    }
    font Hack 11
    status_command i3blocks
    tray_output *
}

include /etc/sway/config.d/*
exec_always systemctl --user start sway-session.target
